# Release Notes


## [1.0.7]

## NUOVE FUNZIONALITA'

## BUG RISOLTI
- Allineata la logica di fattura pagata con fibra-app



## [1.0.6]

## NUOVE FUNZIONALITA'

## BUG RISOLTI
- Allineata la logica di fattura pagata con fibra-app



## [1.0.5]

## NUOVE FUNZIONALITA'

## BUG RISOLTI
- fix jakson deserialize getContratti
- fix jakson deserialize getInfoPagamentoFattura

## [1.0.4]

## NUOVE FUNZIONALITA'

## BUG RISOLTI
- fix getContratti
- fix getInfoPagamentoFattura

## PROBLEMI NOTI


## [1.0.3]

## NUOVE FUNZIONALITA'
- formattazione dei campi providerContract e idFattura

## BUG RISOLTI
- fix request verso getContratti

## PROBLEMI NOTI

## [1.0.2]

***Properties modificate***

| Key                                                | Type     | Default             | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|----------------------------------------------------|----------|---------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| envFrom.REST_SERVICES_STS_BASEURI                  | string   | `"_#PLACEHOLDER"`   | SVIL: https://idp-retail.sv.poste.it/jod-idp-retail/federation/sts/private/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type} COLL: https://idp-poste.test.poste.it/jod-idp-retail/federation/sts/private/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type} CERT: https://idp-poste.cert.poste.it/jod-idp-retail/federation/sts/private/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type} PROD: https://idp-poste.poste.it/jod-idp-retail/federation/sts/private/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type} |
| envFrom.REST_SERVICES_NOTIFICATION_PUSH_BASEURI    | string   | `"_#PLACEHOLDER"`   | svill: https://notification-gateway.app.svil2.ocprm.testposte/notification-gateway/async/push/v1/send   coll: https://notification-gateway.app.coll2.ocprm.testposte/notification-gateway/async/push/v1/send   cert: https://notification-gateway.app.cert.ocpto.local/notification-gateway/async/push/v1/send   prod : https://notification-gateway.app.prod.ocprm.local/notification-gateway/async/push/v1/send                                                                                                                                                                                                                                                                                                 |

## NUOVE FUNZIONALITA'
- aggiunti log
- aggiornate le config map

## BUG RISOLTI
- fix conditionalOnProperty nelle configurazioni dei bean

## PROBLEMI NOTI

## [1.0.1]

***Properties modificata***

| Key                                | Type     | Default             | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|------------------------------------|----------|---------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| envFrom.REST_SERVICES_STS_BASEURI  | string   | `"_#PLACEHOLDER"`   | SVIL: https://idp-retail.sv.poste.it/jod-idp-retail/federation/sts/private/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type} COLL: https://idp-poste.test.poste.it/jod-idp-retail/federation/sts/private/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type} CERT: https://idp-poste.cert.poste.it/jod-idp-retail/federation/sts/private/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type} PROD: https://idp-poste.poste.it/jod-idp-retail/federation/sts/private/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type} |

- Aggiunti hostAliases riguardanti la chiamata verso idp-retail. 
- Modificato il formato della data (dd/MM/yyyy) letta dal tracciato BDL

## NUOVE FUNZIONALITA'

## BUG RISOLTI

## PROBLEMI NOTI

## [1.0.0]


| **Nome servizio**                   | **versione** |
|-------------------------------------|--------------|
| API -  /api/v1/axway/billing/ricevi | 1.0.0        |
| API -  /api/v1/axway/postel/ricevi  | 1.0.0        |

***Properties aggiunte***


| Key                                                                | Type     | Default                                                                                                                                                                       | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|--------------------------------------------------------------------|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| envFrom.PUSH_MSG_FATTURA_EMESSA                                    | string   | `"\\u{C8} disponibile la nuova fattura della tua offerta %s. Visualizza e paga."`                                                                                             | MESSAGE PUSH messaggi da inviare al mittentecome notifica push -- Messaggi che saranno inviati al mittente della notifica per le fattture emesse, N.B. %s verrà sostituito con l'offerta recuperata dal file csv                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| envFrom.PUSH_MSG_FATTURA_IN_SCADENZA                               | string   | `"La fattura della tua offerta %s \\u{E8} in scadenza. Visualizza e paga."`                                                                                                   | Messaggi che saranno inviati al mittente della notifica per le fattture scadute, N.B. %s verrà sostituito con l'offerta recuperata dal file csv                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| envFrom.PUSH_TYPE                                                  | string   | `"MAIL_UPLOAD_DOC"`                                                                                                                                                           | Tipo della richiesta NotificationPushRequest.pushType in NotificationPushServiceImpl.send                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| envFrom.PUSH_THREAD_CHECK_INTERVAL                                 | string   | `"100"`                                                                                                                                                                       | Intervallo del check del completamento della push di tutte le notifiche                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| envFrom.REDIS_HOST                                                 | string   | `"_#PLACEHOLDER"`                                                                                                                                                             | Redis host. In ambiente collaudo, Redis si trova nello stesso namespace, quindi l'host è uguale al nome del service SVIL: redis COLL: redis                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| envFrom.REST_SERVICES_BDL_IGNITE2REST_MONITORING_EXCHANGE_ENABLE   | string   | `"false"`                                                                                                                                                                     | Abilitazione logging di request e response alle chiamate del servizio ignite2rest esposto da Billing Data Layer (in certificazione puo' essere impostato a true, in produzione a false)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| envFrom.REST_SERVICES_BDL_IGNITE2REST_MONITORING_LATENCY_ENABLE    | string   | `"true"`                                                                                                                                                                      | Abilitazione logging dei tempi di esecuzione dalle chiamate del servizio ignite2rest esposto da Billing Data Layer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| envFrom.REST_SERVICES_NOTIFICATION_PUSH_BASEURI                    | string   | `"_#PLACEHOLDER"`                                                                                                                                                             | Url del servizio per le notifiche push svill: https://notification-gateway.app.svil2.ocprm.testposte/push-sender/push/v1/send   coll: https://notification-gateway.app.coll2.ocprm.testposte/notification-gateway/async/push/v1/send   cert: https://notification-gateway.app.cert.ocpto.local/notification-gateway/async/push/v1/send   prod : https://notification-gateway.app.prod.ocprm.local/notification-gateway/async/push/v1/send                                                                                                                                                                                                                                                                                                                                               |
| envFrom.REST_SERVICES_NOTIFICATION_PUSH_MONITORING_EXCHANGE_ENABLE | string   | `"false"`                                                                                                                                                                     | Abilitazione logging di request e response delle chiamate del servizio per le notifihe push (in certificazione puo' essere impostato a true, in produzione a false)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| envFrom.REST_SERVICES_STS_BASEURI                                  | string   | `"_#PLACEHOLDER"`                                                                                                                                                             | Base URI del servizio IDP (Secure Token System) per il reperimento del Bearer Token  -- SVIL: https://idp-business.sv.poste.it/jod-idp-retail/federation/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type}     -- COLL: https://idp-business.test.poste.it/jod-idp-retail/federation/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type}    -- CERT: https://idp-business.cert.poste.it/jod-idp-retail/federation/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type}    -- PROD: https://idp-business.poste.it/jod-idp-retail/federation/v2/token?client_id={clientId}&client_secret={client_secret}&scope={scope}&grant_type={grant_type} |
| envFrom.REST_SERVICES_STS_MONITORING_EXCHANGE_ENABLE               | string   | `"false"`                                                                                                                                                                     | Abilitazione logging di request e response alle chiamate del servizio IDP (in certificazione puo' essere impostato a true, in produzione a false)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| envFrom.THREAD_POOL_CORE_SIZE                                      | string   | `"2"`                                                                                                                                                                         | Dimensione base della pool del ThreadPoolTaskExecutor                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| envFrom.THREAD_POOL_MAX_SIZE                                       | string   | `"5"`                                                                                                                                                                         | Dimensione massima della pool del ThreadPoolTaskExecutor                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| envFrom.THREAD_POOL_QUEUE_CAPACITY                                 | string   | `"500"`                                                                                                                                                                       | Dimensione della coda                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| envFrom.THREAD_POOL_THREAD_NAME_PREFIX                             | string   | `"FibraAppBatch-"`                                                                                                                                                            | Prefisso dei thread                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| envFrom.STS_ISSUER                                                 | string   | `"fibra-app-batch"`                                                                                                                                                           | ClientId chiamata IDP                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| envFrom.STS_SCOPE                                                  | string   | `"/notification-gateway/sync/push/v1/send+/notification-gateway/async/push/v1/send+/notification-gateway/sync/push/v1/validate+/notification-gateway/async/push/v1/validate"` | Scope della chiamata IDP                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| global.repository                                                  | string   | `"_#PLACEHOLDER"`                                                                                                                                                             | Docker Registry (COLL: palmcreg01a.azurecr.io/)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| idp.password                                                       | string   | `"_#PLACEHOLDER"`                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| image.imageName                                                    | string   | `"fibra-app-batch"`                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| redis                                                              | object   | `{"password":"_#PLACEHOLDER"}`                                                                                                                                                | Impostare la password di Redis in chiaro                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| route.host                                                         | string   | `"_#PLACEHOLDER"`                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| envFrom.REST_SERVICES_FIBRA_APP_SERVICE_BASEURI                    | string   | `"http://fibra-app-services.fibra-app.svc.cluster.local:8080"`                                                                                                                | Base URI del servizio esposto da Fibra app services (il servizio e' esposto sullo stesso OCP gpweb2. La url del service dovrebbe essere http://fibra-app-services.fibra-app.svc.cluster.local:8080 su tutti gli ambienti)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| envFrom.REST_SERVICES_FIBRA_APP_SERVICE_REQUEST_CONN_TIMEOUT       | string   | `"5s"`                                                                                                                                                                        | Valore connection timeout applicato alle chiamate del servizio Fibra app services                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| envFrom.REST_SERVICES_FIBRA_APP_SERVICE_REQUEST_SO_TIMEOUT         | string   | `"10s"`                                                                                                                                                                       | Valore request timeout applicato alle chiamate del servizio Fibra app services                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| envFrom.REST_SERVICES_FIBRA_APP_SERVICE_MONITORING_EXCHANGE_ENABLE | string   | `"_#PLACEHOLDER"`                                                                                                                                                             | Abilitazione logging di request e response alle chiamate del servizio Fibra app services (in certificazione puo' essere impostato a true, in produzione a false)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| envFrom.REST_SERVICES_FIBRA_APP_SERVICE_MONITORING_LATENCY_ENABLE  | string   | `"_#PLACEHOLDER"`                                                                                                                                                             | Abilitazione logging dei tempi di esecuzione dalle chiamate del servizio Fibra app services                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| envFrom.REST_SERVICES_FIBRA_APP_SERVICE_MONITORING_LOG_BODY_ENABLE | string   | `"_#PLACEHOLDER"`                                                                                                                                                             | Abilitazione logging del body delle chiamate del servizio Fibra app services                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

## NUOVE FUNZIONALITA'
Implementati servizi per l'invio delle notifiche push:
- api/v1/axway/billing/ricevi  invio della notifica push <b>Ti ricordo che la fattura N° XXX scadrà il giorno XXX</b>
- api/v1/axway/postel/ricevi  invio della notifica push <b>Ti ricordo che è stata emessa la fattura N° xxx in data XXX</b>

## BUG RISOLTI

## PROBLEMI NOTI

